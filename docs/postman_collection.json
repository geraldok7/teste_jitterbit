{
  "info": {
    "name": "Orders API",
    "_postman_id": "7f2f4b20-0000-0000-0000-postman-col",
    "description": "CRUD de pedidos com mapping e respostas HTTP adequadas.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Create Order",
      "request": {
        "method": "POST",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"numeroPedido\": \"v10089016vdb-01\",\n  \"valorTotal\": 10000,\n  \"dataCriacao\": \"2023-07-19T12:24:11.5299601+00:00\",\n  \"items\": [ { \"idItem\": \"2434\", \"quantidadeItem\": 1, \"valorItem\": 1000 } ]\n}"
        },
        "url": { "raw": "{{baseUrl}}/order" }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('Status 201', () => pm.response.code === 201)",
              "const data = pm.response.json()",
              "pm.environment.set('orderId', data.orderId)"
            ]
          }
        }
      ],
      "response": [
        {
          "name": "201 Created",
          "status": "Created",
          "code": 201,
          "body": "{\n  \"orderId\": \"v10089016vdb\",\n  \"value\": 10000,\n  \"creationDate\": \"2023-07-19T12:24:11.529Z\",\n  \"items\": [ { \"productId\": 2434, \"quantity\": 1, \"price\": 1000 } ]\n}"
        }
      ]
    },
    {
      "name": "List Orders",
      "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/order/list" } },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('Status 200', () => pm.response.code === 200)",
              "const list = pm.response.json()",
              "pm.expect(Array.isArray(list)).to.be.true"
            ]
          }
        }
      ],
      "response": [
        {
          "name": "200 OK",
          "status": "OK",
          "code": 200,
          "body": "[\n  {\n    \"orderId\": \"v10089015vdb\",\n    \"value\": 10000,\n    \"creationDate\": \"2023-07-19T12:24:11.529Z\",\n    \"items\": [ { \"productId\": 2434, \"quantity\": 1, \"price\": 1000 } ]\n  }\n]"
        }
      ]
    },
    {
      "name": "Get Order by ID",
      "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/order/{{orderId}}" } },
      "event": [
        {
          "listen": "test",
          "script": { "type": "text/javascript", "exec": [ "pm.test('Status 200', () => pm.response.code === 200)" ] }
        }
      ],
      "response": [
        {
          "name": "200 OK",
          "status": "OK",
          "code": 200,
          "body": "{\n  \"orderId\": \"v10089016vdb\",\n  \"value\": 10000,\n  \"creationDate\": \"2023-07-19T12:24:11.529Z\",\n  \"items\": [ { \"productId\": 2434, \"quantity\": 1, \"price\": 1000 } ]\n}"
        }
      ]
    },
    {
      "name": "Update Order",
      "request": {
        "method": "PUT",
        "header": [ { "key": "Content-Type", "value": "application/json" } ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"numeroPedido\": \"{{orderId}}-01\",\n  \"valorTotal\": 12000,\n  \"dataCriacao\": \"2023-07-19T12:24:11.5299601+00:00\",\n  \"items\": [ { \"idItem\": \"2434\", \"quantidadeItem\": 2, \"valorItem\": 6000 } ]\n}"
        },
        "url": { "raw": "{{baseUrl}}/order/{{orderId}}" }
      },
      "event": [
        { "listen": "test", "script": { "type": "text/javascript", "exec": [ "pm.test('Status 200', () => pm.response.code === 200)" ] } }
      ],
      "response": [
        {
          "name": "200 OK",
          "status": "OK",
          "code": 200,
          "body": "{\n  \"orderId\": \"v10089016vdb\",\n  \"value\": 12000,\n  \"creationDate\": \"2023-07-19T12:24:11.529Z\",\n  \"items\": [ { \"productId\": 2434, \"quantity\": 2, \"price\": 6000 } ]\n}"
        }
      ]
    },
    {
      "name": "Delete Order",
      "request": { "method": "DELETE", "url": { "raw": "{{baseUrl}}/order/{{orderId}}" } },
      "event": [
        { "listen": "test", "script": { "type": "text/javascript", "exec": [ "pm.test('Status 204', () => pm.response.code === 204)" ] } }
      ],
      "response": [
        {
          "name": "204 No Content",
          "status": "No Content",
          "code": 204,
          "body": ""
        }
      ]
    }
  ]
}
